package scorer;

import player.Player;

// 입력된 값을 조회해서 스크린에 표시될 값을 계산(string)

public class Scorer
{
    public static void ShowScoreBoard(Player[] playersTable, int pNumber, int fNumber, int bNumber) // 어디까지 진행됐는지 pNumber로 체크
    {
        String top = "[선수]\t[1]     [2]     [3]     [4]     [5]     [6]     [7]     [8]     [9]     [10]     [총점]";
        System.out.println(top);

        for (int p = 0; p < pNumber - 1; p++) // pNumber가 현재 진행중인 선수의 번호
        {
            Player player = playersTable[p];
            String middle = p + 1 + "번" + "\t";

            for (int f = 1; f < fNumber; f++)
            {
                middle += player.GetLog(f, 1) + " " + player.GetLog(f, 2) + "     ";
                // 여기 bottom 로직 추가
            }
            if (bNumber == 2)
            {
                middle += player.GetLog(fNumber, 1) + " " + player.GetLog(fNumber, 2);
            }
            else
            // bNumber == 1
            {
                middle += player.GetLog(fNumber, 1);
            }
            System.out.println(middle);
        }
    }

    // 스트라이크, 스패어 이후 볼수 세기

    // 볼 결과는 바로바로 입력한대로 나온다
    public static String FirstBowlResultCalculator(Player player, int fNumber)
    {
        int bResult1 = player.GetLog(fNumber, 1);
        String bResultToScreen1;

        if (bResult1 == 10)
        {
            bResultToScreen1 = "X"; // 스트라이크
        }
        else if (bResult1 == 0)
        {
            bResultToScreen1 = "-";
        }
        else
        {
            bResultToScreen1 = "" + bResult1;
        }
        return bResultToScreen1;
    }

    public static String SecondBowlResultCalculator(Player player, int fNumber)
    {
        int bResult1 = player.GetLog(fNumber, 1);
        int bResult2 = player.GetLog(fNumber, 2);
        String bResultToScreen2;

        if (bResult1 == 10)
        {
            bResultToScreen2 = " "; // 공백 들어감
        }
        else if (bResult2 == 0)
        {
            bResultToScreen2 = "-";
        }
        else if (bResult1 + bResult2 == 10)
        {
            bResultToScreen2 = "/"; // 앞에서 10과 0에 대해 처리해줬기 때문에 (10,0)같은 경우는 들어오지 않음
        }
        else
        {
            bResultToScreen2 = "" + bResult2;
        }
        return bResultToScreen2;
    }

    public static void FrameResultCalculator(Player player, int fNumber)
    {
        int fResult;

        if (player.GetBowlSum(fNumber) == 10) // 스트라이크나 스페어인 경우
        {
            if (player.GetLog(fNumber, 1) == 10) // 스트라이크
            {
                fResult = StrikeCalculator(player, fNumber);
            }
            else
            // 스페어
            {
                fResult = SpareCalculator(player, fNumber);
            }
        }
        else
        {
            fResult = player.GetBowlSum(fNumber);
        }

        player.SetFrameResult(fNumber, fResult);
    }

    private static int SpareCalculator(Player player, int fNumber)
    {
        int bowlResult1 = player.GetLog(fNumber, 1);
        int bowlResult2 = player.GetLog(fNumber, 2);
        int nextFrameBowlResult1 = player.GetLog(fNumber + 1, 1);
        int fResult = bowlResult1 + bowlResult2 + nextFrameBowlResult1;
        return fResult;
    }

    private static int StrikeCalculator(Player player, int fNumber)
    {
        int bowlResult1 = player.GetLog(fNumber, 1);
        int bowlResult2 = player.GetLog(fNumber, 2);
        int nextFrameBowlResult1 = player.GetLog(fNumber + 1, 1);
        int nextFrameBowlResult2;

        if (nextFrameBowlResult1 == 10) // 다음 프레임에 스트라이크가 났을 때
        {
            nextFrameBowlResult2 = player.GetLog(fNumber + 2, 1); // 다다음 프레임 첫번째 볼 결과
        }
        else
        {
            nextFrameBowlResult2 = player.GetLog(fNumber + 1, 2); // 다음 프레임의 두번째 볼 결과
        }

        int fResult = bowlResult1 + bowlResult2 + nextFrameBowlResult1 + nextFrameBowlResult2;
        return fResult;
    }
}